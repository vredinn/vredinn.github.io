document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".slider"),t=document.querySelectorAll(".slider__area"),r=document.querySelectorAll(".slider__button");let s,o,n=!1,l=new Map;for(let e of t){let t=e.querySelector(".slider__card").offsetWidth,r=Math.round(e.parentElement.offsetWidth/t),s=[...e.children];s.slice(-r).reverse().forEach((t=>{e.insertAdjacentHTML("afterbegin",t.outerHTML)})),s.slice(0,r).forEach((t=>{e.insertAdjacentHTML("beforeend",t.outerHTML)}))}function a(e,t){n=!0,t.classList.add("slider__area_dragging"),s=e.pageX||e.touches[0].pageX,o=t.scrollLeft}function d(e,t){n&&(t.scrollLeft=o-((e.pageX||e.touches[0].pageX)-s))}function i(e){n=!1,e.classList.remove("slider__area_dragging"),f(e)}function c(e){let t=e.querySelector(".slider__card").offsetWidth,r=setInterval((()=>{e.scrollLeft+=t,f(e)}),2500);l.set(e,r)}function f(e){e.scrollLeft<=0?(e.classList.add("slider__area_no-transition"),e.scrollLeft=e.scrollWidth-2*e.offsetWidth,e.classList.remove("slider__area_no-transition")):Math.abs(e.scrollLeft-(e.scrollWidth-e.offsetWidth))<2&&(e.classList.add("slider__area_no-transition"),e.scrollLeft=e.offsetWidth,e.classList.remove("slider__area_no-transition"))}r.forEach((e=>{let t=e.parentElement.querySelector(".slider__area").querySelector(".slider__card").offsetWidth;e.addEventListener("click",(()=>{let r=e.parentElement.querySelector(".slider__area");r.scrollLeft+=e.classList.contains("slider__button_prev")?-t:t,f(r)}))}));for(let e of t)e.addEventListener("mousedown",(t=>{function r(t){d(t,e)}a(t,e),window.addEventListener("mousemove",r),window.addEventListener("mouseup",(function t(){i(e),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",t)}))})),e.addEventListener("touchstart",(t=>a(t,e))),e.addEventListener("touchmove",(t=>d(t,e))),e.addEventListener("touchend",(()=>i(e))),e.addEventListener("scroll",(()=>f(e)));for(let t of e)t.addEventListener("mouseenter",(()=>{var e;e=t.querySelector(".slider__area"),clearInterval(l.get(e))})),t.addEventListener("mouseleave",(()=>{c(t.querySelector(".slider__area"))}));t.forEach((e=>c(e)))}));